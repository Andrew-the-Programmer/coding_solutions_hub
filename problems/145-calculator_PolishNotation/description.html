<!DOCTYPE html> <html class="i-ua_js_yes i-ua_css_standard i-ua_svg_yes i-ua_inlinesvg_yes i-ua_placeholder_yes wswvfbpl" lang=ru data-darkreader-mode=dynamic data-darkreader-scheme=dark data-darkreader-proxy-injected=true><!--
 Page saved with SingleFile 
 url: https://contest.yandex.ru/contest/59869/problems/G/ 
 saved date: Tue Aug 27 2024 19:31:47 GMT+0300 (Moscow Standard Time)
--><meta charset=utf-8><style class="darkreader darkreader--variables" media=screen>:root{--darkreader-neutral-background:#171716;--darkreader-neutral-text:#fffff2;--darkreader-selection-background:#124f98;--darkreader-selection-text:#fffff1}</style><style class="darkreader darkreader--root-vars" media=screen>:root{}</style><style class="darkreader darkreader--user-agent" media=screen>@layer{html{background-color:#171716!important}html{color-scheme:dark!important}iframe{color-scheme:initial}html,body{background-color:#171716}html,body{border-color:#7f7666;color:#fffff2}a{color:#669bd6}table{border-color:#61625e}mark{color:#fffff2}::placeholder{color:#cbc0ad}input:-webkit-autofill,textarea:-webkit-autofill,select:-webkit-autofill{background-color:#434416!important;color:#fffff2!important}::-webkit-scrollbar{background-color:#212220;color:#c2b8a5}::-webkit-scrollbar-thumb{background-color:#4e4f4b}::-webkit-scrollbar-thumb:hover{background-color:#656562}::-webkit-scrollbar-thumb:active{background-color:#525350}::-webkit-scrollbar-corner{background-color:#171716}::selection{background-color:#124f98!important;color:#fffff1!important}::-moz-selection{background-color:#124f98!important;color:#fffff1!important}}</style><meta http-equiv=X-UA-Compatible content="IE=edge"><title>G. Calculator.PolishNotation — База 2024 2 сем. Задание 1. C++ — Яндекс.Контест</title><style>@-moz-keyframes blink{0%{background:#7e7}50%{background:0 0}100%{background:#7e7}}@-webkit-keyframes blink{0%{background:#7e7}50%{background:0 0}100%{background:#7e7}}@keyframes blink{0%{background:#7e7}50%{background:0 0}100%{background:#7e7}}</style><style class="darkreader darkreader--cors" media=screen>@-moz-keyframes blink{0%{background:#7e7}50%{background:0 0}100%{background:#7e7}}@-webkit-keyframes blink{0%{background:#7e7}50%{background:0 0}100%{background:#7e7}}@keyframes blink{0%{background:#7e7}50%{background:0 0}100%{background:#7e7}}</style><style>body{position:relative;z-index:0;margin:0;padding:0 0 1em;font:.8em Arial,Helvetica,sans-serif;color:#000;background:#fff}:link:hover,:visited:hover{color:red!important}:link{color:#1a3dc1}*{margin:0;font-size:100%}td{border-collapse:collapse}td{text-align:left}:link,:visited{text-decoration:underline}fieldset{border:0}.island{background:#fff;-webkit-box-shadow:0 0 0 1px rgba(0,0,0,.1);-moz-box-shadow:0 0 0 1px rgba(0,0,0,.1);box-shadow:0 0 0 1px rgba(0,0,0,.1);-ms-box-shadow:0 0 0 1px rgba(0,0,0,.1);-o-box-shadow:0 0 0 1px rgba(0,0,0,.1)}.header{position:relative;z-index:10}.header{width:100%}@media screen and (min-width:1265px){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}.text *{margin:0;padding:0;font-size:14px;font-weight:400;line-height:20px}.text div,.text ol,.text ul{margin:0;padding:0}.text li,.text h1,.text h2,.text h3,.text h4{padding:0}.text p{margin:0;padding:0}.text td{margin:0}.text table{padding:0}.text tr,.text pre{margin:0;padding:0}.text{font-size:15px;color:#000}.text h1{margin:0 0 40px;font-family:textbook,Arial,Helvetica,sans-serif;font-size:35px;line-height:40px}.text h2{margin:0 0 20px;font-size:25px;line-height:30px}.text h3{margin:0 0 10px;font-size:20px;line-height:25px}.text h4{margin:0;font-size:15px;font-weight:700;line-height:20px}.text div+h2{margin-top:40px}.text p+h3,.text h2+div h3:first-of-type{margin-top:30px}.text p+h4{margin-top:25px}.text div+p{margin-top:20px}.text p+p,.text ul+p,.text ol+p{margin-top:10px}.text table{margin:20px -20px;border-collapse:collapse;font-size:14px}.text tr{border-bottom:1px solid #e5e5e5}.text td{vertical-align:middle}.text td{font-size:14px}.text a{text-decoration:none;color:#07c}.text a:hover{text-decoration:underline;color:red}.text a:active{background-color:#ffeba0}.text strong{font-weight:700}.text ol p{margin-top:5px}.text ol{list-style:decimal}.text ul{list-style:disc}.text ul ul{list-style:circle}.text li{margin:5px 0 0 20px;list-style-position:inside}.text li p:first-child{display:inline}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}.problem{display:inline-block;margin-bottom:14px}.problem__item{padding:0}.problem__statement{padding:0 40px;line-height:18px}.problem-statement .header table{margin-left:0}.problem-statement .header td{padding-right:14px;padding-left:14px}.problem__statement td{height:auto;padding:5px 10px 4px;border:1px solid #bfbfbf}.problem__statement td{line-height:18px}.problem__statement tr{border:1px solid #bfbfbf}.problem__statement .Markdown code{margin-top:.5em;margin-bottom:.5em;font-family:monospace}@keyframes spoilerFlavorContestContentFadeIn{from{opacity:0}to{opacity:1}}.problem_mode_one-button .problem__item{min-width:0}@-moz-document url-prefix(){.problem_mode_one-button .problem__item{display:table-cell}}@-webkit-keyframes islands-spin2{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}from,to{border-top-color:#fc0;border-left-color:#fc0}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes islands-spin2{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}from,to{border-top-color:#fc0;border-left-color:#fc0}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.content{font-size:14px}.content .problem{width:75%}.content .problem{vertical-align:top}.content_theme_contest{margin-top:20px;margin-bottom:20px;padding:10px}@media all and (min-width:0){}@media all and (min-width:0){}.page__sect{width:960px;margin:0 auto}.b-page{min-width:1000px}</style><style class="darkreader darkreader--cors" media=screen>body{position:relative;z-index:0;margin:0;padding:0 0 1em;font:.8em Arial,Helvetica,sans-serif;color:#000;background:#fff}:link:hover,:visited:hover{color:red!important}:link{color:#1a3dc1}*{margin:0;font-size:100%}td{border-collapse:collapse}td{text-align:left}:link,:visited{text-decoration:underline}fieldset{border:0}.island{background:#fff;-webkit-box-shadow:0 0 0 1px rgba(0,0,0,.1);-moz-box-shadow:0 0 0 1px rgba(0,0,0,.1);box-shadow:0 0 0 1px rgba(0,0,0,.1);-ms-box-shadow:0 0 0 1px rgba(0,0,0,.1);-o-box-shadow:0 0 0 1px rgba(0,0,0,.1)}.header{position:relative;z-index:10}.header{width:100%}@media screen and (min-width:1265px){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}.text *{margin:0;padding:0;font-size:14px;font-weight:400;line-height:20px}.text div,.text ol,.text ul{margin:0;padding:0}.text li,.text h1,.text h2,.text h3,.text h4{padding:0}.text p{margin:0;padding:0}.text td{margin:0}.text table{padding:0}.text tr,.text pre{margin:0;padding:0}.text{font-size:15px;color:#000}.text h1{margin:0 0 40px;font-family:textbook,Arial,Helvetica,sans-serif;font-size:35px;line-height:40px}.text h2{margin:0 0 20px;font-size:25px;line-height:30px}.text h3{margin:0 0 10px;font-size:20px;line-height:25px}.text h4{margin:0;font-size:15px;font-weight:700;line-height:20px}.text div+h2{margin-top:40px}.text p+h3,.text h2+div h3:first-of-type{margin-top:30px}.text p+h4{margin-top:25px}.text div+p{margin-top:20px}.text p+p,.text ul+p,.text ol+p{margin-top:10px}.text table{margin:20px -20px;border-collapse:collapse;font-size:14px}.text tr{border-bottom:1px solid #e5e5e5}.text td{vertical-align:middle}.text td{font-size:14px}.text a{text-decoration:none;color:#07c}.text a:hover{text-decoration:underline;color:red}.text a:active{background-color:#ffeba0}.text strong{font-weight:700}.text ol p{margin-top:5px}.text ol{list-style:decimal}.text ul{list-style:disc}.text ul ul{list-style:circle}.text li{margin:5px 0 0 20px;list-style-position:inside}.text li p:first-child{display:inline}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}@media all and (min-width:0){}.problem{display:inline-block;margin-bottom:14px}.problem__item{padding:0}.problem__statement{padding:0 40px;line-height:18px}.problem-statement .header table{margin-left:0}.problem-statement .header td{padding-right:14px;padding-left:14px}.problem__statement td{height:auto;padding:5px 10px 4px;border:1px solid #bfbfbf}.problem__statement td{line-height:18px}.problem__statement tr{border:1px solid #bfbfbf}.problem__statement .Markdown code{margin-top:.5em;margin-bottom:.5em;font-family:monospace}@keyframes spoilerFlavorContestContentFadeIn{from{opacity:0}to{opacity:1}}.problem_mode_one-button .problem__item{min-width:0}@-moz-document url-prefix(){.problem_mode_one-button .problem__item{display:table-cell}}@-webkit-keyframes islands-spin2{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}from,to{border-top-color:#fc0;border-left-color:#fc0}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes islands-spin2{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}from,to{border-top-color:#fc0;border-left-color:#fc0}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.content{font-size:14px}.content .problem{width:75%}.content .problem{vertical-align:top}.content_theme_contest{margin-top:20px;margin-bottom:20px;padding:10px}@media all and (min-width:0){}@media all and (min-width:0){}.page__sect{width:960px;margin:0 auto}.b-page{min-width:1000px}</style><style class="darkreader darkreader--sync" media=screen>body{color:rgb(255,255,242);background-image:initial;background-color:rgb(23,23,22)}:link:hover,:visited:hover{color:rgb(199,54,48)!important}:link{color:rgb(137,170,207)}:link,:visited{text-decoration-color:initial}fieldset{border-width:0px;border-style:initial;border-color:initial}.island{background-image:initial;background-color:rgb(23,23,22);box-shadow:rgba(0,0,0,0.1) 0px 0px 0px 1px}@media (min-width:0){}@media (min-width:0){}@media (min-width:0){}@media (min-width:0){}@media (min-width:0){}@media (min-width:0){}@media (min-width:0){}@media (min-width:0){}@media (min-width:0){}@media (min-width:0){}@media (min-width:0){}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){}@media (min-width:0){}@media (min-width:0){}@media (min-width:0){}@media (min-width:0){}@media (min-width:0){}.text{color:rgb(255,255,242)}.text tr{border-bottom-color:rgb(61,62,60)}.text a{text-decoration-color:initial;color:rgb(140,196,229)}.text a:hover{text-decoration-color:initial;color:rgb(199,54,48)}.text a:active{background-color:rgb(79,66,22)}.text ol{list-style-image:initial}.text ul{list-style-image:initial}.text ul ul{list-style-image:initial}@media (min-width:0){}@media (min-width:0){}@media (min-width:0){}@media (min-width:0){}@media (min-width:0){}.problem__statement td{border-color:rgb(75,76,73)}.problem__statement tr{border-color:rgb(75,76,73)}</style><!--[if IE 6]><link rel="stylesheet" href="//yastatic.net/s3/contest/static/contest-www/0.196.0-78b0a681a3/bundles/problems/_problems.ie6.css"/><![endif]--><!--[if IE 7]><link rel="stylesheet" href="//yastatic.net/s3/contest/static/contest-www/0.196.0-78b0a681a3/bundles/problems/_problems.ie7.css"/><![endif]--><!--[if IE 8]><link rel="stylesheet" href="//yastatic.net/s3/contest/static/contest-www/0.196.0-78b0a681a3/bundles/problems/_problems.ie8.css"/><![endif]--><!--[if IE 9]><link rel="stylesheet" href="//yastatic.net/s3/contest/static/contest-www/0.196.0-78b0a681a3/bundles/problems/_problems.ie9.css"/><![endif]--><meta name=description content="Яндекс.Контест это сервис, позволяющий программистам со всего мира соревноваться на предложенных задачах, а преподавателям и авторам задач -- размещать задания и серии заданий и предоставлять доступ пользователям через интернет."><meta name=viewport content="width=device-width, initial-scale=1"><meta name=yandex-verification content=b22f2e5048e733e5><style>body{counter-reset:katexEqnNo mmlEqnNo}</style><style class="darkreader darkreader--cors" media=screen>body{counter-reset:katexEqnNo mmlEqnNo}</style><style>@media (max-width:500px){}@media (min-width:501px){}@media (orientation:landscape) and (max-device-width:500px){}</style><style class="darkreader darkreader--sync" media=screen>@media (max-width:500px){}@media (min-width:501px){}@media (orientation:landscape) and (max-device-width:500px){}</style><style>@media (max-height:669px) and (min-height:370px){}@media (min-height:670px){}</style><style>@media (max-width:480px){}@media (min-width:481px){}</style><meta name=darkreader content=83fc8ce0bd494dd8a69c375ddcd15277><style class="darkreader darkreader--override" media=screen>::placeholder{opacity:0.5!important}</style><meta name=referrer content=no-referrer><link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAIAEBAAAAEAIAAoBQAAJgAAACAgAAABACAAKBQAAE4FAAAoAAAAEAAAACAAAAABACAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAGgAAAEYAAABMAAAATAAAAEwAAABMAAAATAAAAEwAAABMAAAATAAAAEwAAABMAAAAEwAAAAAAAAAAAAAAAAAAAEPg4uPY9PX2//T19v/09fb/9PX2//T19v/09fb/9PX2//T19v/09fb/2trczQAAADgAAAAAAAAAAAAAAAAAAABJ9Pb3//T29//09vf/9Pb3//T29//09vf/9Pb3//T29//09vf/9Pb3//T29/94e3tyAAAAEgAAAAAAAAAAAAAASPX39//19/f/9ff3/3Vu6P9mX+b/9ff3//X39/8cIN3/9ff3//X39//19/f/3d7fzQAAADYAAAAAAAAAAAAAAEb29/j/9vf4//b3+P/c3PX/Fx/c/87M8//29/j/DR/b//b3+P/29/j/9vf4//b3+P9/f39yAAAAEgAAAAAAAABE9/j5//f4+f/3+Pn/9/j5/4F76v9XT+X/9/j5/w0f2//3+Pn/9/j5//f4+f/3+Pn/4OHizwAAADMAAAAAAAAAQvj5+v/4+fr/+Pn6//j5+v/t7fn/IiDe/6Ke7/8NH9v/+Pn6//j5+v/4+fr/+Pn6//j5+v+GiIhwAAAAEQAAAED5+vr/+fr6//n6+v/5+vr/enPp/zEm4P9pYef/DR/b//n6+v/5+vr/+fr6//n6+v/5+vr/4+PjzwAAADAAAAA++vv7//r7+//6+/v/ycf0/x8g3f/s7Pn/+vv7/w0f2//6+/v/+vv7//r7+//6+/v/+vv7/+Pl5c8AAAAuAAAAPPv8/P/7/Pz/+/z8/52Y7/9QR+T/+/z8//v8/P8NH9v/+/z8//v8/P/7/Pz/+/z8//v8/P+Ojo5rAAAADwAAADr8/f3//P39//z9/f+qpvH/Qjjj//z9/f/8/f3/DR/b//z9/f/8/f3//P39//z9/f/o6enMAAAAKwAAAAAAAAA4/f3+//39/v/9/f7/6un7/xwg3f/LyPf//f3+/w0f2//9/f7//f3+//39/v/9/f7/kpKSZwAAAA4AAAAAAAAAN/7+/v/+/v7//v7+//7+/v/Ewfb/OC3h/ywh4P8NH9v//v7+//7+/v/+/v7/6urqyQAAACkAAAAAAAAAAAAAADX+/////v////7////+/////v////7////+/////v////7////+/////v///5KSkmMAAAANAAAAAAAAAAAAAAAw7u7uz////////////////////////////////////////////////+rq6sYAAAAnAAAAAAAAAAAAAAAAAAAAEwAAAC8AAAAzAAAAMwAAADMAAAAzAAAAMwAAADMAAAAzAAAAMwAAADMAAAAzAAAADQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAIAAAAEAAAAABACAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEAAAA4AAAASwAAAE0AAABNAAAATQAAAE0AAABNAAAATQAAAE0AAABNAAAATQAAAE0AAABNAAAATQAAAE0AAABNAAAATQAAAE0AAABNAAAATQAAAE0AAABNAAAAEwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPAAAASgAAAEwAAABMAAAATAAAAEwAAABMAAAATAAAAEwAAABMAAAATAAAAEwAAABMAAAATAAAAEwAAABMAAAATAAAAEwAAABMAAAATAAAAEwAAABMAAAATAAAAEwAAAA5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAABLmZubiOvu7/Hz9fb/8/X2//P19v/z9fb/8/X2//P19v/z9fb/8/X2//P19v/z9fb/8/X2//P19v/z9fb/8/X2//P19v/z9fb/8/X2//P19v/y9PX+bGxsbgAAAEsAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARwAAAEvp6uvt9PX2//T19v/09fb/9PX2//T19v/09fb/9PX2//T19v/09fb/9PX2//T19v/09fb/9PX2//T19v/09fb/9PX2//T19v/09fb/9PX2//T19v/X19jJAAAASwAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABKAAAASvT29//09vf/9Pb3//T29//09vf/9Pb3//T29//09vf/9Pb3//T29//09vf/9Pb3//T29//09vf/9Pb3//T29//09vf/9Pb3//T29//09vf/9Pb3//P19v5wcHBvAAAASgAAABMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEkAAABJ9Pb3//T29//09vf/9Pb3//T29//09vf/9Pb3//T29//09vf/9Pb3//T29//09vf/9Pb3//T29//09vf/9Pb3//T29//09vf/9Pb3//T29//09vf/9Pb3/9jb28kAAABJAAAANwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASQAAAEn19vf/9fb3//X29//19vf/9fb3//X29/+Sjev/HCDd/yYg3v/i4vX/9fb3//X29//19vf/9fb3/x8g3f8RH9v/9fb3//X29//19vf/9fb3//X29//19vf/9fb3/3R0dHAAAABJAAAAEgAAAAAAAAAAAAAAAAAAAAAAAABIAAAASPX39//19/f/9ff3//X39//19/f/9ff3/+jp9f8fIN3/DR/b/3dw6P/19/f/9ff3//X39//19/f/DR/b/w0f2//19/f/9ff3//X39//19/f/9ff3//X39//19/f/2tvbywAAAEgAAAA2AAAAAAAAAAAAAAAAAAAAAAAAAEcAAABH9ff4//X3+P/19/j/9ff4//X3+P/19/j/9ff4/5SP7P8NH9v/FB/c/93e9f/19/j/9ff4//X3+P8NH9v/DR/b//X3+P/19/j/9ff4//X3+P/19/j/9ff4//X3+P/19/j/eXx8bwAAAEcAAAASAAAAAAAAAAAAAAAAAAAARgAAAEb29/j/9vf4//b3+P/29/j/9vf4//b3+P/29/j/8vP4/zEo4P8NH9v/b2jn//b3+P/29/j/9vf4/w0f2/8NH9v/9vf4//b3+P/29/j/9vf4//b3+P/29/j/9vf4//b3+P/e39/LAAAARgAAADUAAAAAAAAAAAAAAAAAAABFAAAARfb4+f/2+Pn/9vj5//b4+f/2+Pn/9vj5//b4+f/2+Pn/sK3w/w0f2/8RH9z/2dn1//b4+f/2+Pn/DR/b/w0f2//2+Pn/9vj5//b4+f/2+Pn/9vj5//b4+f/2+Pn/9vj5//b4+f9+foBvAAAARQAAABEAAAAAAAAAAAAAAEQAAABE9/j5//f4+f/3+Pn/9/j5//f4+f/3+Pn/9/j5//f4+f/3+Pn/SkDj/w0f2/9mXub/9/j5//f4+f8NH9v/DR/b//f4+f/3+Pn/9/j5//f4+f/3+Pn/9/j5//f4+f/3+Pn/9/j5/+Hi4swAAABEAAAAMwAAAAAAAAAAAAAAQwAAAEP3+fn/9/n5//f5+f/3+fn/9/n5//f5+f/3+fn/9/n5//f5+f/LyvP/Dx/b/xEf2//U1PX/9/n5/w0f2/8NH9v/9/n5//f5+f/3+fn/9/n5//f5+f/3+fn/9/n5//f5+f/3+fn/9/n5/4WFhW8AAABDAAAAEQAAAAAAAABCAAAAQvj5+v/4+fr/+Pn6//j5+v/4+fr/+Pn6//j5+v/4+fr/+Pn6//j5+v9fV+b/DR/b/0I34v97dOn/DR/b/w0f2//4+fr/+Pn6//j5+v/4+fr/+Pn6//j5+v/4+fr/+Pn6//j5+v/4+fr/4+PjzgAAAEIAAAAyAAAAAAAAAEEAAABB+Pr6//j6+v/4+vr/+Pr6//j6+v/4+vr/+Pr6//j6+v/19/r/d3Hp/xEf2/8NH9v/DR/b/w0f2/8NH9v/DR/b//j6+v/4+vr/+Pr6//j6+v/4+vr/+Pr6//j6+v/4+vr/+Pr6//j6+v/4+vr/h4mJbwAAAEEAAAAQAAAAQAAAAED5+vr/+fr6//n6+v/5+vr/+fr6//n6+v/5+vr/+fr6/2lh5/8NH9v/Fx/c/4uF7P/LyfT/2tn2/w0f2/8NH9v/+fr6//n6+v/5+vr/+fr6//n6+v/5+vr/+fr6//n6+v/5+vr/+fr6//n6+v/j4+PPAAAAQAAAADAAAAA/AAAAP/r6+//6+vv/+vr7//r6+//6+vv/+vr7//r6+//BvvP/DR/b/w8f2//AvfP/+vr7//r6+//6+vv/DR/b/w0f2//6+vv/+vr7//r6+//6+vv/+vr7//r6+//6+vv/+vr7//r6+//6+vv/+vr7/+Pj5c8AAAA/AAAALwAAAD4AAAA++vv7//r7+//6+/v/+vv7//r7+//6+/v/+vv7/2lh5/8NH9v/Uknk//r7+//6+/v/+vv7//r7+/8NH9v/DR/b//r7+//6+/v/+vv7//r7+//6+/v/+vv7//r7+//6+/v/+vv7//r7+//6+/v/jI6ObQAAAD4AAAAQAAAAPQAAAD37+/z/+/v8//v7/P/7+/z/+/v8//v7/P/7+/z/OzDh/w0f2/+OiO3/+/v8//v7/P/7+/z/+/v8/w0f2/8NH9v/+/v8//v7/P/7+/z/+/v8//v7/P/7+/z/+/v8//v7/P/7+/z/+/v8/+Tk5s0AAAA9AAAALgAAAAAAAAA8AAAAPPv8/P/7/Pz/+/z8//v8/P/7/Pz/+/z8//v8/P8vJOD/DR/b/6Ke8P/7/Pz/+/z8//v8/P/7/Pz/DR/b/w0f2//7/Pz/+/z8//v8/P/7/Pz/+/z8//v8/P/7/Pz/+/z8//v8/P/7/Pz/jY2NagAAADwAAAAPAAAAAAAAADsAAAA7/Pz8//z8/P/8/Pz//Pz8//z8/P/8/Pz//Pz8/z4y4v8NH9v/l5Hu//z8/P/8/Pz//Pz8//z8/P8NH9v/DR/b//z8/P/8/Pz//Pz8//z8/P/8/Pz//Pz8//z8/P/8/Pz//Pz8/+fn58oAAAA7AAAALAAAAAAAAAAAAAAAOgAAADr8/f3//P39//z9/f/8/f3//P39//z9/f/8/f3/bGTo/w0f2/9waen//P39//z9/f/8/f3//P39/w0f2/8NH9v//P39//z9/f/8/f3//P39//z9/f/8/f3//P39//z9/f/8/f3/io2NZwAAADoAAAAPAAAAAAAAAAAAAAA5AAAAOf39/f/9/f3//f39//39/f/9/f3//f39//39/f+0sPP/DR/b/yIg3v/z8vz//f39//39/f/9/f3/DR/b/w0f2//9/f3//f39//39/f/9/f3//f39//39/f/9/f3//f39/+jo6MgAAAA5AAAAKwAAAAAAAAAAAAAAAAAAADgAAAA4/f3+//39/v/9/f7//f3+//39/v/9/f7//f3+//v7/v8+M+L/DR/b/2BX5//19P3//f3+//39/v8NH9v/DR/b//39/v/9/f7//f3+//39/v/9/f7//f3+//39/v/9/f7/jIyMZAAAADgAAAAOAAAAAAAAAAAAAAAAAAAANwAAADf9/v7//f7+//3+/v/9/v7//f7+//3+/v/9/v7//f7+/9zb+f8mIN//DR/b/yIg3v9VTOX/XVXn/w0f2/8NH9v//f7+//3+/v/9/v7//f7+//3+/v/9/v7//f7+/+bn58YAAAA3AAAAKQAAAAAAAAAAAAAAAAAAAAAAAAA3AAAAN/7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+/+zr+/98dev/LSLg/xEf3P8NH9v/DR/b/xEf3P/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7/i4uLYQAAADcAAAAOAAAAAAAAAAAAAAAAAAAAAAAAADYAAAA2/v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+/+jo6MQAAAA2AAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANQAAADX+/////v////7////+/////v////7////+/////v////7////+/////v////7////+/////v////7////+/////v////7////+/////v////7////9///+h4eHXgAAADUAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAyAAAANfr6+u7//////////////////////////////////////////////////////////////////////////////////////////////////////////+np6cEAAAA1AAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACcAAAA0tra2ePn5+er////////////////////////////////////////////////////////////////////////////////////////////////////+hYWFWgAAADQAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAADIAAAAzAAAAMwAAADMAAAAzAAAAMwAAADMAAAAzAAAAMwAAADMAAAAzAAAAMwAAADMAAAAzAAAAMwAAADMAAAAzAAAAMwAAADMAAAAzAAAAMwAAADMAAAAzAAAAJgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAACYAAAAxAAAAMwAAADMAAAAzAAAAMwAAADMAAAAzAAAAMwAAADMAAAAzAAAAMwAAADMAAAAzAAAAMwAAADMAAAAzAAAAMwAAADMAAAAzAAAAMwAAADMAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="><link rel=canonical href=https://contest.yandex.ru/contest/59869/problems/G/><meta http-equiv=content-security-policy content="default-src 'none'; font-src 'self' data:; img-src 'self' data:; style-src 'unsafe-inline'; media-src 'self' data:; script-src 'unsafe-inline' data:; object-src 'self' data:; frame-src 'self' data:;"><style>img[src="data:,"],source[src="data:,"]{display:none!important}</style><body class="b-page b-page__body i-global i-ua i-ua_interaction_yes page i-bem i-global_js_inited i-ua_platform_other i-ua_hi-dpi_yes i-ua_js_inited page_js_inited" data-bem='{"i-global":{"lang":"ru","tld":"ru","content-region":"ru","click-host":"//clck.yandex.ru","passport-host":"https://passport.yandex.ru","pass-host":"pass.yandex.ru","social-host":"social.yandex.ru","export-host":"https://export.yandex.ru","login":"chikin.ap@phystech.edu","lego-static-host":"//yastatic.net/lego/2.10-142","id":"contest","displayName":"chikin.ap@phystech.edu","yandexuid":"5646557841724523584","social-retpath":"https://contest.yandex.ru/i-social__closer.html","retpath":"http://contest.yandex.ru/contest/59869/problems/G/","passport-msg":"contest"},"i-ua":{},"page":{}}' __processed_242eb99b-d4ad-4687-b049-7bd5c048fddc__=true bis_register=W3sibWFzdGVyIjp0cnVlLCJleHRlbnNpb25JZCI6ImVwcGlvY2VtaG1ubGJoanBsY2drb2ZjaWllZ29tY29uIiwiYWRibG9ja2VyU3RhdHVzIjp7IkRJU1BMQVkiOiJkaXNhYmxlZCIsIkZBQ0VCT09LIjoiZGlzYWJsZWQiLCJUV0lUVEVSIjoiZGlzYWJsZWQiLCJSRURESVQiOiJkaXNhYmxlZCIsIlBJTlRFUkVTVCI6ImRpc2FibGVkIiwiSU5TVEFHUkFNIjoiZGlzYWJsZWQiLCJMSU5LRURJTiI6ImRpc2FibGVkIiwiQ09ORklHIjoiZGlzYWJsZWQifSwidmVyc2lvbiI6IjIuMC4xNiIsInNjb3JlIjoyMDAxNn1d data-interaction=pointer><div id=MathJax_Message style=display:none!important bis_skin_checked=1></div><div class="page__head island" bis_skin_checked=1 style=display:none!important></div><div class="page__main page__sect" bis_skin_checked=1><div class="content content_theme_contest island" bis_skin_checked=1><div class=contest-head bis_skin_checked=1 style=display:none!important></div><div class="msg msg_type_info msg_theme_island msg_pos_over-tabs" bis_skin_checked=1 style=display:none!important>Ваше участие в соревновании завершено. Вы можете дорешивать задачи и отправлять решения вне соревнования</div><ul class="tabs-menu tabs-menu_size_m tabs-menu_theme_normal tabs-menu_layout_horiz tabs-menu_role_contest tabs-menu_type_stroked i-bem tabs-menu_js_inited" data-bem='{"tabs-menu":{}}' role=menu style=display:none!important></ul><form class="problem problem_type_single problem_mode_one-button problem_contest-type_simple i-bem problem_js_inited" data-bem='{"problem":{}}' action=/contest/59869/submit/ method=POST enctype=multipart/form-data><fieldset class=problem__item><div class="problem__statement text" data-bem='{"problem__statement":{}}' bis_skin_checked=1><div class="problem-statement problem-statement_type_markdown" bis_skin_checked=1>
 <div class=header bis_skin_checked=1>
 <h1 class=title>G. Calculator.PolishNotation</h1>
 <table class=limits>
 <tbody>
 <tr class=time-limit>
 <td class=property-title>Ограничение времени</td>
 <td>1&nbsp;секунда</td>
 </tr>
 <tr class=memory-limit>
 <td class=property-title>Ограничение памяти</td>
 <td>64.0 Мб</td>
 </tr>
 <tr class=input-file>
 <td class=property-title>Ввод</td>
 <td colspan=1>стандартный ввод или input.txt</td>
 </tr>
 <tr class=output-file>
 <td class=property-title>Вывод</td>
 <td colspan=1>стандартный вывод или output.txt</td>
 </tr>
 </tbody>
 </table>
 </div>
 <h2></h2>
 <div class=legend bis_skin_checked=1>
 <div class=Markdown bis_skin_checked=1>
 <p class=paragraph><em>Когда говорят "компьютерная программа", одно из первых, что приходит на ум, — калькулятор. Действительно, изначальное
 назначение компьютеров - производить математические вычисления. И кажется, это настолько базовая задача, что написать
 калькулятор на любом известном вам языке программирования не составляет никакого труда. Тем не менее оказывается, что
 это не такая уж тривиальная и скучная задача. Как, например, вычислить значение, заданное входом</em>
 "1 * (((2 * 3) * (4 + 5) + 6 + 7) * (8 * 9 + 10 * 11) * 12)"? <em>Данная задача в трех частях ответит на этот вопрос.</em></p>
 <h3>Polish Notation</h3>
 <p class=paragraph>Трудоемкость написания калькулятора заключается в сложности определения порядка выполняемых действий и построения дерева
 разбора выражения. <a href=https://en.wikipedia.org/wiki/Binary_expression_tree><em>Дерево разбора выражения</em></a> - корневое дерево,
 вершинами которого являются операции, а дети вершин - выражения (поддеревья), являющиеся их операндами. В листьях дерева
 находятся числа (константы).</p>
 <p class=paragraph>Выражения записанные в <a href=https://en.wikipedia.org/wiki/Polish_notation>польской нотации</a> очень просты для разбора, так
 как операции в ней уже записаны в нужном для вычисления порядке (в порядке pre-order обхода дерева).</p>
 <p class=paragraph><em>Пример:</em></p>
 <div class=code bis_skin_checked=1>
 <pre><code>"+ 3 4": читаем оператор + -&gt; он бинарный -&gt; читаем первый и второй операнд, 3 и 4 -&gt; получаем результат операции 7
  +
 / \
3   4

"+ 3 * 4 5": извлекаем оператор + -&gt; он бинарный -&gt; вычисляем первый операнд - 3
-&gt; второй операнд - результат операции * -&gt; вычисляем его операнды (аналогично первому примеру)
-&gt; вычисляем результат выражения
  +
 / \
3   *
   / \
  4   5</code></pre>
 </div>
 <p class=paragraph>Формально, каждое значение (токен) в польском выражении можно считать некоторой операцией. Пусть дан массив токенов и в
 данный момент рассматриваем токен в позиции <code>pos</code>. Построение дерева разбора в общем случае выглядит так:</p>
 <ol start=1>
 <li>
 <p class=paragraph>Определяется тип операции и ее арность (количество операндов). Сдвигаем <code>pos</code> на 1 элемент вправо.</p>
 </li>
 <li>
 <p class=paragraph>Если операция не требует аргументов (константа), то возвращаем ее в качестве результата.</p>
 </li>
 <li>
 <p class=paragraph>Если операция унарная, рекурсивно строим поддерево для операнда, сохраняем его в соответствующее поле операции,
 возвращаем операцию (корень поддерева).</p>
 </li>
 <li>
 <p class=paragraph>Если операция бинарная, рекурсивно строим поддерево первого аргумента, второго аргумента, сохраняем их в поля объекта
 нужной бинарной операции, возвращаем этот объект в качестве ответа (корня поддерева).</p>
 </li>
 </ol>
 <p class=paragraph>Например, возведение в квадрат - унарная операция: она извлекается; далее строится операнд посредством обработки
 следующей операции в массиве; мы знаем, что результат обработки - это операция, результат которой будет выступать
 аргументом; сохраняем ее в поле объекта класса <code>Square</code>; возвращаем готовую операцию <code>Square</code>.</p>
 <p class=paragraph>Сумма - бинарная операция: она извлекается; строится первый операнд; результат записывается в поле класса <code>Sum</code>;
 строится второй операнд; второй операнд сохраняется в поле <code>Sum</code>; возвращаем полученный объект <code>Sum</code>.</p>
 <p class=paragraph><em>Пример:</em></p>
 <div class=code bis_skin_checked=1>
 <pre><code>"+ sqr 3 -5"
1. Запускаем построение выражения.
2. '+': создаем объект типа Sum
3. Рекурсивно запускаем построение первого операнда
    3.1. 'sqr': создаем объект типа Square
    3.2. Рекурсивно запускаем построение операнда для Square
        3.2.1. '3': создаем объект Constant(3) возвращаем его в качестве результата.
    3.3. Сохраняем результат рекурсивного вызова в поле объекта Square.
    3.4. Все операнды построены, возвращаем объект Square
4. Сохраняем результат рекурсивного вызова в первое поле объекта Sum.
5. Рекурсивно запускаем построение второго операнда.
    5.1 '-5': создаем объект Constant(-5) возвращаем его в качестве результата.
6. Сохраняем результат рекурсивного вызова во второе поле объекта Sum.
7. Возвращаем объект Sum.

В итоге возвращается следующее бинарное дерево:
    +
   / \
 sqr -5
  |
  3</code></pre>
 </div>
 <p class=paragraph>Видно, что построение дерева разбора выражения сводится к построению первой операции (корня) в массиве (все остальное
 строится рекурсивно). В случае, если выражение было составлено верно, то в результате рекурсивных вызовов <code>pos</code> окажется
 в позиции следующей за последним токеном (будет равен длине массива).</p>
 <h4>Детали реализации</h4>
 <p class=paragraph>Решение состоит из двух частей - токенизации (уже реализована в части 1) и построения дерева разбора.</p>
 <p class=paragraph>В файле <code>expressions.h</code> необходимо объявить классы операций.</p>
 <ul>
 <li><code>IExpression</code>
 <ul>
 <li>абстрактный класс для представления произвольной операции.
 <ul>
 <li>Содержит единственный публичный метод <code>int Calculate() const</code>, который вычисляет свои операнды и возвращает
 результат применения операции.</li>
 </ul>
 </li>
 </ul>
 </li>
 <li><code>Constant</code>
 <ul>
 <li>наследник <code>IExpression</code>.
 <ul>
 <li>Имеет конструктор от <code>int</code>, сохраняющий значение константы в свое поле.</li>
 <li>Определяет метод <code>Calculate</code> (просто возвращает свое значение).</li>
 </ul>
 </li>
 </ul>
 </li>
 <li><code>IUnaryOperation</code>
 <ul>
 <li>абстрактный класс, наследник <code>IExpression</code>, представляющий произвольную унарную операцию.
 <ul>
 <li>Имеет конструктор от <code>std::unique_ptr&lt;IExpression&gt;</code>, который сохраняет переданный указатель в поле (операнд).</li>
 <li>Имеет метод <code>int Operation(int operand) const</code>, который применяет операцию к вычисленному операнду.</li>
 <li>Определяет метод <code>Calculate</code> путем вычисления операнда и применения к нему операции.</li>
 </ul>
 </li>
 </ul>
 </li>
 <li><code>IBinaryOperation</code>
 <ul>
 <li>абстрактный класс, наследник <code>IExpression</code>, представляющий произвольную бинарную операцию
 <ul>
 <li>Имеет конструктор от двух <code>std::unique_ptr&lt;IExpression&gt;</code>, который сохраняет переданные указатели в поля (операнды).</li>
 <li>Имеет метод <code>int Operation(int lhs, int rhs) const</code>, который применяет операцию к вычисленным операндам.</li>
 <li>Определяет метод <code>Calculate</code> путем вычисления операндов и применения к ним операции.</li>
 </ul>
 </li>
 </ul>
 </li>
 <li>Классы операций <code>Sum</code> (+), <code>Subtract</code> (-), <code>Multiply</code>(*), <code>Divide</code>(/), <code>Residual</code>(%), <code>Minimum</code>(min), <code>Maximum</code>(max),
 <code>AbsoluteValue</code>(abs), <code>Square</code>(sqr), которые должны быть унаследованы от соответствующих абстрактных классов
 (<code>IUnaryOperation</code> или <code>IBinaryOperation</code>) и реализовать соответствующий метод <code>Operation</code>.
 В классы описанные выше вы можете добавлять свои приватные/публичные методы. Самостоятельно определите, какие методы
 должны быть виртуальными/чисто виртуальными. Для интереса можете добавлять свои операции. Если все реализовано верно, то
 для этого будет достаточно ввести новый класс и правильно его унаследовать.
 </li>
 </ul>
 <p class=paragraph>Также нужна функция <code>int CalculatePolishNotation(std::string_view input)</code>, которая токенизирует вход, строит дерево разбора
 и запускает вычисление выражения.
 Прототип и реализацию описать в <code>polish_notation.h</code> и <code>polish_notation.cpp</code>.</p>
 <p class=paragraph>Программа должна бросать исключения <code>UnknownSymbolError</code>, если в результате токенизации был получен неизвестный токен;
 <code>WrongExpressionError</code>, если выражение составлено некорректно.
 </p>
 <p class=paragraph>Гарантируется, что все промежуточные результаты помещаются в <code>int</code>.</p>
 <p class=paragraph>Для простоты будем считать, что все токены разделены пробелами (произвольным их количеством).</p>
 <p class=paragraph><strong>Замечания.</strong></p>
 <ol start=1>
 <li>Вам понадобится токенизатор из предыдущего задания.</li>
 <li>В качестве решения пришлите файлы с ВАШИМ кодом из папок calculator/tokenize и calculator/polish_notation (например, tokenize.h tokenize.cpp polish_notation.cpp polish_notation.h expressions.h единым архивом). Тестирующий скрипт самостоятельно разложит их в нужной структуре (относительные пути менять не нужно)</li>
 </ol>
 </div>
 </div>
</div></div></fieldset></form></div></div>